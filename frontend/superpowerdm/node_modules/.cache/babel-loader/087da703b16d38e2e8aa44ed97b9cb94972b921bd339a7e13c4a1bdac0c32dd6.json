{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useParams}from'react-router-dom';import axios from'axios';import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginScreen(){const navigate=useNavigate();const[showLogin,setShowLogin]=useState(true);const[contentClass,setContentClass]=useState('fade-in');const[fbLoaded,setFbLoaded]=useState(false);const handleLoginClick=()=>{setContentClass('fade-out');setTimeout(()=>{setShowLogin(false);setContentClass('fade-in');},500);// Match this with your CSS transition time\n};useEffect(()=>{(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='https://connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js,fjs);})(document,'script','facebook-jssdk');const checkFB=setInterval(()=>{if(window.FB){window.FB.init({appId:'1079236933072082',autoLogAppEvents:true,xfbml:true,version:'v18.0'});window.FB.getLoginStatus(function(response){statusChangeCallback(response);});setFbLoaded(true);clearInterval(checkFB);}},1000);// Check every second\nreturn()=>clearInterval(checkFB);// Clean up on unmount\n},[]);const facebookBusinessLogin=()=>{if(!fbLoaded){console.log('FB SDK not loaded yet.');return;}window.FB.login(function(response){if(response.authResponse){console.log('You are now logged in.');var accessToken=response.authResponse.accessToken;statusChangeCallback(response,accessToken);}else{console.log('User cancelled login or did not fully authorize.');}},{scope:'email'});};// send the response to the server\nconst sendResponseToServer=(fbResponse,accessToken)=>{axios.post('/login',{fbResponse:fbResponse,accessToken:accessToken}).then(response=>{const data=response.data;if(data.success&&data.redirect){// Redirect to the setup page\nwindow.location.href=data.redirect;}else{// Handle login failure\nconsole.error('Login failed:',data.message);}}).catch(error=>{console.error('Error:',error);});};const statusChangeCallback=(response,accessToken)=>{if(response.status==='connected'){console.log('Welcome! Fetching your information.... ');window.FB.api('/me',function(userResponse){console.log('Successful login for: '+userResponse.name);sendResponseToServer(userResponse,accessToken);});}else{console.log('Please log in to Facebook.');}};const facebookLogout=()=>{if(window.FB){window.FB.logout(function(response){// Handle the response, such as updating the state to reflect the user's logout\nconsole.log(\"User logged out of Facebook\");// Additional actions post-logout can be placed here\n});}else{console.log(\"Facebook SDK not loaded yet.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"outer-container\",children:showLogin?/*#__PURE__*/_jsxs(\"div\",{className:\"login-screen \".concat(contentClass),children:[/*#__PURE__*/_jsx(\"img\",{src:\"Assets/colourFullLogo.png\",alt:\"Logo\",className:\"centered-image\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Helping Creators Maximize Follower-Engagement with AI\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",onClick:handleLoginClick,children:\"Log In\"}),/*#__PURE__*/_jsx(\"button\",{className:\"register-button\",onClick:()=>window.open('https://docs.google.com/forms/d/e/1FAIpQLSdodkpVCh7FBhW4Scf0kHRJmmaBR2dklR2W96kO6MjEFVolrg/viewform','_blank'),children:\"Request Access\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"new-content \".concat(contentClass),children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"SuperpowerDM is presently only available to invited users. Please click below if you are pre-approved.\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:facebookLogout,className:\"logout-button\",children:\"Log Out of Facebook\"})}),fbLoaded&&/*#__PURE__*/_jsxs(\"button\",{className:\"fb-login-button\",onClick:facebookBusinessLogin,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-facebook-square\"}),\" Continue with Facebook\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"Assets/whiteFullLogo.png\",alt:\"Small Image\",className:\"bottom-image\"})]})});}export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","LoginScreen","navigate","showLogin","setShowLogin","contentClass","setContentClass","fbLoaded","setFbLoaded","handleLoginClick","setTimeout","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","checkFB","setInterval","window","FB","init","appId","autoLogAppEvents","xfbml","version","getLoginStatus","response","statusChangeCallback","clearInterval","facebookBusinessLogin","console","log","login","authResponse","accessToken","scope","sendResponseToServer","fbResponse","post","then","data","success","redirect","location","href","error","message","catch","status","api","userResponse","name","facebookLogout","logout","className","children","concat","alt","onClick","open"],"sources":["C:/Users/riadd/Documents/GitHub/SuperpowerDM/frontend/superpowerdm/src/Components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Login.css';\r\n\r\nfunction LoginScreen() {\r\n  const navigate = useNavigate();\r\n\r\n  const [showLogin, setShowLogin] = useState(true);\r\n  const [contentClass, setContentClass] = useState('fade-in');\r\n  const [fbLoaded, setFbLoaded] = useState(false);\r\n\r\n  const handleLoginClick = () => {\r\n    setContentClass('fade-out');\r\n    setTimeout(() => {\r\n      setShowLogin(false);\r\n      setContentClass('fade-in');\r\n    }, 500); // Match this with your CSS transition time\r\n  };\r\n\r\n  useEffect(() => {\r\n    (function (d, s, id) {\r\n      var js, fjs = d.getElementsByTagName(s)[0];\r\n      if (d.getElementById(id)) return;\r\n      js = d.createElement(s); js.id = id;\r\n      js.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n      fjs.parentNode.insertBefore(js, fjs);\r\n    }(document, 'script', 'facebook-jssdk'));\r\n\r\n    const checkFB = setInterval(() => {\r\n      if (window.FB) {\r\n        window.FB.init({\r\n          appId: '1079236933072082',\r\n          autoLogAppEvents: true,\r\n          xfbml: true,\r\n          version: 'v18.0'\r\n        });\r\n\r\n        window.FB.getLoginStatus(function (response) {\r\n          statusChangeCallback(response);\r\n        });\r\n\r\n        setFbLoaded(true);\r\n        clearInterval(checkFB);\r\n      }\r\n    }, 1000); // Check every second\r\n\r\n    return () => clearInterval(checkFB); // Clean up on unmount\r\n  }, []);\r\n\r\n  const facebookBusinessLogin = () => {\r\n    if (!fbLoaded) {\r\n      console.log('FB SDK not loaded yet.');\r\n      return;\r\n    }\r\n\r\n    window.FB.login(function (response) {\r\n      if (response.authResponse) {\r\n        console.log('You are now logged in.');\r\n        var accessToken = response.authResponse.accessToken;\r\n        statusChangeCallback(response, accessToken);\r\n      } else {\r\n        console.log('User cancelled login or did not fully authorize.');\r\n      }\r\n    }, \r\n    { \r\n      scope: 'email',\r\n    });\r\n  };\r\n\r\n  // send the response to the server\r\n  const sendResponseToServer = (fbResponse, accessToken) => {\r\n    axios.post('/login', { \r\n      fbResponse: fbResponse, \r\n      accessToken: accessToken \r\n    })\r\n    .then(response => {\r\n      const data = response.data;\r\n      if (data.success && data.redirect) {\r\n          // Redirect to the setup page\r\n          window.location.href = data.redirect;\r\n      } else {\r\n          // Handle login failure\r\n          console.error('Login failed:', data.message);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error('Error:', error);\r\n    });\r\n  };  \r\n\r\n  const statusChangeCallback = (response, accessToken) => {\r\n    if (response.status === 'connected') {\r\n      console.log('Welcome! Fetching your information.... ');\r\n      window.FB.api('/me', function (userResponse) {\r\n        console.log('Successful login for: ' + userResponse.name);\r\n        sendResponseToServer(userResponse, accessToken);\r\n      });\r\n    } else {\r\n      console.log('Please log in to Facebook.');\r\n    }\r\n  };\r\n\r\n  const facebookLogout = () => {\r\n    if (window.FB) {\r\n      window.FB.logout(function(response) {\r\n        // Handle the response, such as updating the state to reflect the user's logout\r\n        console.log(\"User logged out of Facebook\");\r\n        // Additional actions post-logout can be placed here\r\n      });\r\n    } else {\r\n      console.log(\"Facebook SDK not loaded yet.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"outer-container\">\r\n      {showLogin ? (\r\n        <div className={`login-screen ${contentClass}`}>\r\n          <img src=\"Assets/colourFullLogo.png\" alt=\"Logo\" className=\"centered-image\" />\r\n          <h2>Helping Creators Maximize Follower-Engagement with AI</h2>\r\n          <button className=\"login-button\" onClick={handleLoginClick}>Log In</button>\r\n          <button className=\"register-button\" onClick={() => window.open('https://docs.google.com/forms/d/e/1FAIpQLSdodkpVCh7FBhW4Scf0kHRJmmaBR2dklR2W96kO6MjEFVolrg/viewform', '_blank')}>\r\n            Request Access\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className={`new-content ${contentClass}`}>\r\n          <h1>Welcome</h1>\r\n          <h2>SuperpowerDM is presently only available to invited users. Please click below if you are pre-approved.</h2>\r\n          <div>\r\n            <button onClick={facebookLogout} className=\"logout-button\">\r\n              Log Out of Facebook\r\n            </button>    \r\n          </div>\r\n          {fbLoaded && (\r\n            <button className=\"fb-login-button\" onClick={facebookBusinessLogin}>\r\n              <i className=\"fab fa-facebook-square\"></i> Continue with Facebook\r\n            </button>\r\n          )}\r\n          <img src=\"Assets/whiteFullLogo.png\" alt=\"Small Image\" className=\"bottom-image\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}