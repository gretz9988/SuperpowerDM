{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import $ from'jquery';import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginScreen(){const navigate=useNavigate();const[showLogin,setShowLogin]=useState(true);const[contentClass,setContentClass]=useState('fade-in');const[fbLoaded,setFbLoaded]=useState(false);const handleLoginClick=()=>{setContentClass('fade-out');setTimeout(()=>{setShowLogin(false);setContentClass('fade-in');},500);// Match this with your CSS transition time\n};useEffect(()=>{(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='https://connect.facebook.net/en_US/sdk.js';fjs.parentNode.insertBefore(js,fjs);})(document,'script','facebook-jssdk');const checkFB=setInterval(()=>{if(window.FB){window.FB.init({appId:'1079236933072082',autoLogAppEvents:true,xfbml:true,version:'v18.0'});window.FB.getLoginStatus(function(response){statusChangeCallback(response);});setFbLoaded(true);clearInterval(checkFB);}},1000);// Check every second\nreturn()=>clearInterval(checkFB);// Clean up on unmount\n},[]);const facebookBusinessLogin=()=>{if(!fbLoaded){console.log('FB SDK not loaded yet.');return;}window.FB.login(function(response){if(response.authResponse){console.log('You are now logged in.');var accessToken=response.authResponse.accessToken;window.FB.getLoginStatus(function(response){statusChangeCallback(response,accessToken);});}else{console.log('User cancelled login or did not fully authorize.');}},{scope:'email'});// You can specify the required scopes here\n};const sendResponseToServer=(fbResponse,accessToken)=>{$.ajax({url:'/process_fb_response',type:'POST',contentType:'application/json',data:JSON.stringify({fbResponse:fbResponse,accessToken:accessToken}),success:function(response){console.log(response);// Additional actions based on response\n},error:function(error){console.error('Error:',error);}});};const statusChangeCallback=(response,accessToken)=>{console.log('FB.getLoginStatus returned: ',response);if(response.status==='connected'){console.log('Welcome! Fetching your information.... ');window.FB.api('/me',function(userResponse){console.log('Successful login for: '+userResponse.name);sendResponseToServer(userResponse,accessToken);// You can redirect or update the UI here\n});}else{console.log('Please log in to Facebook.');}};const onLoginSuccess=userID=>{navigate(\"/setup/\".concat(userID));};return/*#__PURE__*/_jsx(\"div\",{className:\"outer-container\",children:showLogin?/*#__PURE__*/_jsxs(\"div\",{className:\"login-screen \".concat(contentClass),children:[/*#__PURE__*/_jsx(\"img\",{src:\"Assets/colourFullLogo.png\",alt:\"Logo\",className:\"centered-image\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Helping Creators Maximize Follower-Engagement with AI\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",onClick:handleLoginClick,children:\"Log In\"}),/*#__PURE__*/_jsx(\"button\",{className:\"register-button\",onClick:()=>window.open('https://docs.google.com/forms/d/e/1FAIpQLSdodkpVCh7FBhW4Scf0kHRJmmaBR2dklR2W96kO6MjEFVolrg/viewform','_blank'),children:\"Request Access\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"new-content \".concat(contentClass),children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"SuperpowerDM is presently only available to invited users. Please click below if you are pre-approved.\"}),fbLoaded&&/*#__PURE__*/_jsxs(\"button\",{className:\"fb-login-button\",onClick:facebookBusinessLogin,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-facebook-square\"}),\" Continue with Facebook\"]}),/*#__PURE__*/_jsx(\"img\",{src:\"Assets/whiteFullLogo.png\",alt:\"Small Image\",className:\"bottom-image\"})]})});}export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","$","jsx","_jsx","jsxs","_jsxs","LoginScreen","navigate","showLogin","setShowLogin","contentClass","setContentClass","fbLoaded","setFbLoaded","handleLoginClick","setTimeout","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","checkFB","setInterval","window","FB","init","appId","autoLogAppEvents","xfbml","version","getLoginStatus","response","statusChangeCallback","clearInterval","facebookBusinessLogin","console","log","login","authResponse","accessToken","scope","sendResponseToServer","fbResponse","ajax","url","type","contentType","data","JSON","stringify","success","error","status","api","userResponse","name","onLoginSuccess","userID","concat","className","children","alt","onClick","open"],"sources":["C:/Users/riadd/Documents/GitHub/SuperpowerDM/frontend/superpowerdm/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport $ from 'jquery';\r\nimport './Login.css';\r\n\r\nfunction LoginScreen() {\r\n  const navigate = useNavigate();\r\n\r\n  const [showLogin, setShowLogin] = useState(true);\r\n  const [contentClass, setContentClass] = useState('fade-in');\r\n  const [fbLoaded, setFbLoaded] = useState(false);\r\n\r\n  const handleLoginClick = () => {\r\n    setContentClass('fade-out');\r\n    setTimeout(() => {\r\n      setShowLogin(false);\r\n      setContentClass('fade-in');\r\n    }, 500); // Match this with your CSS transition time\r\n  };\r\n\r\n  useEffect(() => {\r\n    (function (d, s, id) {\r\n      var js, fjs = d.getElementsByTagName(s)[0];\r\n      if (d.getElementById(id)) return;\r\n      js = d.createElement(s); js.id = id;\r\n      js.src = 'https://connect.facebook.net/en_US/sdk.js';\r\n      fjs.parentNode.insertBefore(js, fjs);\r\n    }(document, 'script', 'facebook-jssdk'));\r\n\r\n    const checkFB = setInterval(() => {\r\n      if (window.FB) {\r\n        window.FB.init({\r\n          appId: '1079236933072082',\r\n          autoLogAppEvents: true,\r\n          xfbml: true,\r\n          version: 'v18.0'\r\n        });\r\n\r\n        window.FB.getLoginStatus(function (response) {\r\n          statusChangeCallback(response);\r\n        });\r\n\r\n        setFbLoaded(true);\r\n        clearInterval(checkFB);\r\n      }\r\n    }, 1000); // Check every second\r\n\r\n    return () => clearInterval(checkFB); // Clean up on unmount\r\n  }, []);\r\n\r\n  const facebookBusinessLogin = () => {\r\n    if (!fbLoaded) {\r\n      console.log('FB SDK not loaded yet.');\r\n      return;\r\n    }\r\n\r\n    window.FB.login(function (response) {\r\n      if (response.authResponse) {\r\n        console.log('You are now logged in.');\r\n        var accessToken = response.authResponse.accessToken;\r\n        window.FB.getLoginStatus(function (response) {\r\n          statusChangeCallback(response, accessToken);\r\n        });\r\n      } else {\r\n        console.log('User cancelled login or did not fully authorize.');\r\n      }\r\n    }, { scope: 'email' }); // You can specify the required scopes here\r\n  };\r\n\r\n  const sendResponseToServer = (fbResponse, accessToken) => {\r\n    $.ajax({\r\n      url: '/process_fb_response',\r\n      type: 'POST',\r\n      contentType: 'application/json',\r\n      data: JSON.stringify({ fbResponse: fbResponse, accessToken: accessToken }),\r\n      success: function (response) {\r\n        console.log(response);\r\n        // Additional actions based on response\r\n      },\r\n      error: function (error) {\r\n        console.error('Error:', error);\r\n      }\r\n    });\r\n  };\r\n\r\n  const statusChangeCallback = (response, accessToken) => {\r\n    console.log('FB.getLoginStatus returned: ', response);\r\n    if (response.status === 'connected') {\r\n      console.log('Welcome! Fetching your information.... ');\r\n      window.FB.api('/me', function (userResponse) {\r\n        console.log('Successful login for: ' + userResponse.name);\r\n        sendResponseToServer(userResponse, accessToken);\r\n        // You can redirect or update the UI here\r\n      });\r\n    } else {\r\n      console.log('Please log in to Facebook.');\r\n    }\r\n  };\r\n\r\n  const onLoginSuccess = (userID) => {\r\n    navigate(`/setup/${userID}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"outer-container\">\r\n      {showLogin ? (\r\n        <div className={`login-screen ${contentClass}`}>\r\n          <img src=\"Assets/colourFullLogo.png\" alt=\"Logo\" className=\"centered-image\" />\r\n          <h2>Helping Creators Maximize Follower-Engagement with AI</h2>\r\n          <button className=\"login-button\" onClick={handleLoginClick}>Log In</button>\r\n          <button className=\"register-button\" onClick={() => window.open('https://docs.google.com/forms/d/e/1FAIpQLSdodkpVCh7FBhW4Scf0kHRJmmaBR2dklR2W96kO6MjEFVolrg/viewform', '_blank')}>\r\n            Request Access\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className={`new-content ${contentClass}`}>\r\n          <h1>Welcome</h1>\r\n          <h2>SuperpowerDM is presently only available to invited users. Please click below if you are pre-approved.</h2>\r\n          {fbLoaded && (\r\n            <button className=\"fb-login-button\" onClick={facebookBusinessLogin}>\r\n              <i className=\"fab fa-facebook-square\"></i> Continue with Facebook\r\n            </button>\r\n          )}\r\n          <img src=\"Assets/whiteFullLogo.png\" alt=\"Small Image\" className=\"bottom-image\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}