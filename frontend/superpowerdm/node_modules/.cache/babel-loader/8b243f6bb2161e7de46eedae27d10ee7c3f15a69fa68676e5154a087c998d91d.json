{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const defaultData=[];// const defaultData = [\n//   {\n//     id: '1806821234567854',\n//     imageUrl: 'https://picsum.photos/id/237/1080/1080',\n//     date: '2023-12-09T21:35:36+0000',\n//     username: 'user1',\n//     comments: [\n//       { username: 'commenter1', comment: 'Great post!' },\n//       { username: 'commenter2', comment: 'Love this!' }\n//     ]\n//   },\n//   {\n//     id: '179887602982372',\n//     imageUrl: 'https://picsum.photos/id/7/1080/1920',\n//     date: '2023-12-09T21:32:54+0000',\n//     username: 'user2',\n//     comments: [\n//       { username: 'commenter3', comment: 'Amazing content!' },\n//       { username: 'commenter4', comment: 'Really nice picture.' }\n//     ]\n//   },\n//   {\n//     id: '17901198953067',\n//     imageUrl: 'https://picsum.photos/id/63/1080/1080',\n//     date: '2023-11-16T14:51:08+0000',\n//     username: 'user3',\n//     comments: [\n//       { username: 'commenter5', comment: 'This is awesome!' }\n//     ]\n//   },\n//   {\n//     id: '17987708884506',\n//     imageUrl: 'https://picsum.photos/id/16/1080/1920',\n//     date: '2023-11-03T16:16:05+0000',\n//     username: 'user4',\n//     comments: [\n//       { username: 'commenter1', comment: 'I like this post a lot.' },\n//       { username: 'commenter7', comment: 'Great job!' },\n//       { username: 'commenter8', comment: 'Very cool!' }\n//     ]\n//   },\n//   {\n//     id: '1823344558749012',\n//     imageUrl: 'https://picsum.photos/id/5/1080/1080',\n//     date: '2023-10-25T10:30:21+0000',\n//     username: 'user5',\n//     comments: [\n//       { username: 'commenter9', comment: 'Superb!' },\n//       { username: 'commenter10', comment: 'Inspiring work.' }\n//     ]\n//   },\n//   {\n//     id: '17651127890987654',\n//     imageUrl: 'https://picsum.photos/id/59/1080/1080',\n//     date: '2023-10-20T08:15:45+0000',\n//     username: 'user6',\n//     comments: [\n//       { username: 'commenter11', comment: 'Fantastic!' },\n//       { username: 'commenter12', comment: 'Wow, this is great!' }\n//     ]\n//   },\n//   {\n//     id: '176543677654',\n//     imageUrl: 'https://picsum.photos/id/59/1080/1080',\n//     date: '2023-10-20T08:15:45+0000',\n//     username: 'user6',\n//     comments: [\n//       { username: 'commenter11', comment: 'Fantastic!' },\n//       { username: 'commenter12', comment: 'Wow, this is great!' }\n//     ]\n//   },\n// ];\nconst LoadingOverlay=()=>/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000},children:/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',color:'white'},children:\"Loading...\"})});const CardComponent=_ref=>{let{maxCards}=_ref;const[data,setData]=useState(()=>{const savedData=localStorage.getItem('defaultData');return savedData?JSON.parse(savedData):defaultData;});const[isLoading,setIsLoading]=useState(false);const[displayedComments,setDisplayedComments]=useState({});const[rejectedComments,setRejectedComments]=useState(()=>{const savedRejectedComments=localStorage.getItem('rejectedComments');return savedRejectedComments?new Set(JSON.parse(savedRejectedComments)):new Set();});const[repliedComments,setRepliedComments]=useState(()=>{const savedRepliedComments=localStorage.getItem('repliedComments');return savedRepliedComments?new Set(JSON.parse(savedRepliedComments)):new Set();});const[activeCard,setActiveCard]=useState(null);const initializeCountdown=()=>{const disabledTime=localStorage.getItem('disabledTime');if(disabledTime){const now=new Date().getTime();const remainingTime=300-Math.floor((now-parseInt(disabledTime))/1000);return remainingTime>0?remainingTime:0;}return 0;};const[isButtonDisabled,setIsButtonDisabled]=useState(initializeCountdown()>0);const[countdown,setCountdown]=useState(initializeCountdown());useEffect(()=>{localStorage.setItem('defaultData',JSON.stringify(data));},[data]);useEffect(()=>{localStorage.setItem('rejectedComments',JSON.stringify(Array.from(rejectedComments)));},[rejectedComments]);useEffect(()=>{localStorage.setItem('repliedComments',JSON.stringify(Array.from(repliedComments)));},[repliedComments]);const fetchMedia=async()=>{setIsLoading(true);setIsButtonDisabled(true);try{// Existing fetch operation\nconst response=await fetch('/fetch_media',{method:'POST',headers:{'Content-Type':'application/json'}});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const jsonData=await response.json();setIsButtonDisabled(false);let transformedData=jsonData.map(item=>({imageUrl:item.media_url,date:item.timestamp,id:item.id,username:item.username,comments:[],commentsFetched:false}));// Fetch comments for each post\nawait Promise.all(transformedData.map(async item=>{if(!item.commentsFetched){await fetchComments(item.id,item.username);item.commentsFetched=true;}}));let updatedActiveCardExists=false;const updatedData=transformedData.map(newItem=>{const existingItem=data.find(oldItem=>oldItem.id===newItem.id);if(existingItem){if(activeCard&&activeCard.id===existingItem.id){updatedActiveCardExists=true;}return{...newItem,comments:existingItem.comments,commentsFetched:existingItem.commentsFetched};}return newItem;});setIsLoading(false);setData(updatedData);if(!updatedActiveCardExists){setActiveCard(null);// Reset active card\n}}catch(error){console.error('Error fetching media:',error);}finally{setIsButtonDisabled(false);}};const fetchComments=async function(mediaId,username){let isActiveCard=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;try{const response=await fetch('/fetch_comments',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({media_id:mediaId,username:username})});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}let newComments=await response.json();newComments=newComments.filter(comment=>!rejectedComments.has(comment.id)&&!repliedComments.has(comment.id));setData(prevData=>prevData.map(item=>{if(item.id===mediaId){const existingCommentIds=new Set(item.comments.map(c=>c.id));const filteredComments=newComments.filter(comment=>!existingCommentIds.has(comment.id));return{...item,comments:[...item.comments,...filteredComments]};}return item;}));if(isActiveCard){setActiveCard(prevActiveCard=>{if(prevActiveCard&&prevActiveCard.id===mediaId){return{...prevActiveCard,comments:newComments};}return prevActiveCard;});}}catch(error){console.error('Error fetching comments:',error);}};const removeComment=(mediaId,commentToRemove)=>{setRejectedComments(prev=>{const newSet=new Set([...prev,commentToRemove.id]);localStorage.setItem('rejectedComments',JSON.stringify(Array.from(newSet)));// Save to localStorage\nreturn newSet;});setData(prevData=>prevData.map(item=>{if(item.id===mediaId){const updatedComments=item.comments.filter(comment=>comment.id!==commentToRemove.id);return{...item,comments:updatedComments};}return item;}));};const handleCardButtonClick=async card=>{setIsLoading(true);// Start loading\ntry{if(card.comments&&card.comments.length>0){await submitComments(card.comments);// After submitComments, find the updated card in your state\nsetData(prevData=>{const updatedData=prevData.map(post=>{if(post.id===card.id){setActiveCard(post);// Set the updated card as active\nreturn{...post};}return post;});return updatedData;});}}catch(error){console.error('Error in handleCardButtonClick:',error);}finally{setIsLoading(false);// Stop loading\n}};const closeDetailScreen=()=>{setActiveCard(null);};const updateCommentsWithResponses=responseData=>{setData(prevData=>{const updatedData=prevData.map(post=>({...post,comments:post.comments.map(comment=>{const responseEntry=responseData.find(response=>response.id===comment.id);return responseEntry?{...comment,response:responseEntry.response}:comment;})}));console.log(\"Updated data with responses:\",updatedData);return updatedData;});};const submitComments=async comments=>{try{// Filter out comments that already have a response\nconst commentsWithoutResponse=comments.filter(comment=>!comment.response);if(commentsWithoutResponse.length===0){console.log(\"No new comments to process\");return;}// Prepare the payload: include both comment text and id\nconst payload=commentsWithoutResponse.map(comment=>({id:comment.id,comment:comment.comment}));const response=await fetch('/submit_comments',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const responseData=await response.json();updateCommentsWithResponses(responseData);}catch(error){console.error('Error submitting comments:',error);}};// Check if data is empty, and if so, use defaultData\nconst effectiveData=data.length===0?defaultData:data;// Determine the number of cards to display\nconst numCardsToShow=maxCards||effectiveData.length;// Slice the data to limit the number of cards if necessary\nconst limitedData=effectiveData.slice(0,numCardsToShow);const DetailScreen=_ref2=>{let{activeCard,closeDetailScreen,fetchComments,removeComment,rejectedComments}=_ref2;const[selectedComment,setSelectedComment]=useState(null);const[showFullComment,setShowFullComment]=useState(false);const[draftReply,setDraftReply]=useState(\"\");const[generatedResponse,setGeneratedResponse]=useState(\"\");const isCommentRejected=comment=>rejectedComments.has(comment.id);const selectComment=comment=>{setSelectedComment(comment);setShowFullComment(false);setDraftReply(comment.response||\"\");};const refreshComments=async()=>{if(activeCard){await fetchComments(activeCard.id,activeCard.username);// After fetching new comments, check if the previously selected comment still exists\nif(selectedComment){const updatedComment=activeCard.comments.find(comment=>comment.id===selectedComment.id);if(updatedComment){setSelectedComment(updatedComment);// Reselect the comment if it exists\n}else{setSelectedComment(null);// Deselect if the comment no longer exists\n}}}};const handleShowMore=()=>{setShowFullComment(true);};const handleDraftChange=e=>{setDraftReply(e.target.value);};const rejectReply=()=>{if(selectedComment&&activeCard){setRejectedComments(prev=>new Set([...prev,selectedComment.id]));removeComment(activeCard.id,selectedComment);setSelectedComment(null);// Reset selected comment\n}};const publishReply=async()=>{console.log(\"Publishing reply:\",draftReply);if(!selectedComment){console.error(\"No comment selected\");return;}// Get the index of the currently selected comment\nconst currentCommentIndex=activeCard.comments.findIndex(comment=>comment.id===selectedComment.id);// UI update before server response (optimistic update)\nlet optimisticUpdatedComments=[...activeCard.comments];optimisticUpdatedComments=optimisticUpdatedComments.filter(comment=>comment.id!==selectedComment.id);setActiveCard({...activeCard,comments:optimisticUpdatedComments});setData(prevData=>prevData.map(item=>{if(item.id===activeCard.id){return{...item,comments:optimisticUpdatedComments};}return item;}));const payload={commentId:selectedComment.id,reply:draftReply};try{const response=await fetch('/publish_reply',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}// Server confirmed, update the replied comments set\nconst responseData=await response.json();console.log(\"Reply published:\",responseData);setRepliedComments(prev=>{const newSet=new Set([...prev,selectedComment.id]);localStorage.setItem('repliedComments',JSON.stringify(Array.from(newSet)));return newSet;});// Select the next comment if it exists\nconst nextComment=optimisticUpdatedComments[currentCommentIndex]||optimisticUpdatedComments[currentCommentIndex-1]||null;setSelectedComment(nextComment);setDraftReply(nextComment?nextComment.response||\"\":\"\");}catch(error){console.error('Error publishing reply:',error);// Revert UI changes if there was an error\nsetActiveCard({...activeCard,comments:[...activeCard.comments,selectedComment]});setData(prevData=>prevData.map(item=>{if(item.id===activeCard.id){return{...item,comments:[...item.comments,selectedComment]};}return item;}));setSelectedComment(selectedComment);// Re-select the original comment\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Post from \",activeCard.date]}),/*#__PURE__*/_jsxs(\"div\",{className:\"post-image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:activeCard.imageUrl,alt:\"Post\",className:\"post-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"post-image-text\",children:\"Some text next to the image\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-counter\",children:[activeCard.comments.filter(comment=>!rejectedComments.has(comment.id)&&repliedComments.has(comment.id)).length,\"/\",activeCard.comments.filter(comment=>!rejectedComments.has(comment.id)).length,\" comments replied to\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"circle-button\",onClick:refreshComments,children:/*#__PURE__*/_jsx(\"img\",{src:\"/Assets/reload.png\",className:\"reload\",alt:\"Close\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"circle-button\",onClick:closeDetailScreen,children:\"X\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comments-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comments\"}),activeCard.comments.filter(comment=>!isCommentRejected(comment)).filter(comment=>!rejectedComments.has(comment.id))// potential error line\n.map((comment,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item \".concat(selectedComment===comment?'highlighted':''),onClick:()=>selectComment(comment),children:[/*#__PURE__*/_jsx(\"img\",{src:comment.userImage,alt:\"User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-username\",children:[\"@\",comment.username]}),/*#__PURE__*/_jsx(\"div\",{className:\"separator\",children:\"| \"}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-text\",children:comment.comment})]},index);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-detail\",children:selectedComment?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-detail-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedComment.userImage,alt:\"User\",className:\"comment-user-image\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"@\",selectedComment.username]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-detail-title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Commented:\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"comment-text\",children:[showFullComment||selectedComment.comment.length<=250?\"\\\"\".concat(selectedComment.comment,\"\\\"\"):\"\\\"\".concat(selectedComment.comment.substring(0,247),\"...\\\"\"),!showFullComment&&selectedComment.comment.length>250&&/*#__PURE__*/_jsx(\"button\",{onClick:handleShowMore,children:\"Show more\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"draft-reply-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"draft-reply-header\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Your reply draft:\"})}),/*#__PURE__*/_jsx(\"textarea\",{value:draftReply,onChange:handleDraftChange,placeholder:\"Type your reply...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"draft-reply-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:rejectReply,children:\"Reject \\u2716\"}),/*#__PURE__*/_jsx(\"button\",{className:\"publish-button\",onClick:publishReply,children:\"Publish \\u2708\"})]})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Select a comment to view details\"})})]})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[isLoading&&/*#__PURE__*/_jsx(LoadingOverlay,{}),\" \",activeCard?/*#__PURE__*/_jsx(DetailScreen,{activeCard:activeCard,closeDetailScreen:closeDetailScreen,fetchComments:fetchComments,removeComment:removeComment,rejectedComments:rejectedComments}):/*#__PURE__*/_jsxs(\"div\",{className:\"card-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"refresh-button\",children:[/*#__PURE__*/_jsxs(\"button\",{style:isLoading?{backgroundColor:'grey',cursor:'not-allowed'}:{backgroundColor:'red',cursor:'pointer'},disabled:isButtonDisabled,onClick:fetchMedia,children:[/*#__PURE__*/_jsx(\"span\",{children:\" Refresh feed \"}),/*#__PURE__*/_jsx(\"img\",{src:\"/Assets/refresh_red.png\",className:\"reload\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tooltip-icon\",children:\"?\"}),/*#__PURE__*/_jsx(\"span\",{className:\"tooltip-text\",children:\"A process is a set of structured activities and tasks performed to achieve a specific goal.\"})]})]}),limitedData.length>0?limitedData.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"counter-box\",children:[item.comments.filter(comment=>!rejectedComments.has(comment.id)&&repliedComments.has(comment.id)).length,\"/\",item.comments.filter(comment=>!rejectedComments.has(comment.id)).length]}),/*#__PURE__*/_jsx(\"h2\",{children:\" Comments replied \"}),/*#__PURE__*/_jsx(\"button\",{className:\"circle-button\",onClick:()=>fetchComments(item.id,item.username),children:/*#__PURE__*/_jsx(\"img\",{src:\"/Assets/reload.png\",className:\"reload\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.imageUrl,alt:\"Post\",className:\"card-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-text\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Post Date:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-date\",children:item.date})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"card-button\",onClick:()=>handleCardButtonClick(item),children:[\"Review \",item.comments.filter(comment=>!rejectedComments.has(comment.id)).length,\" Draft Replies >\"]})]})]})]},item.id||index)):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-screen\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"No content!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your content will appear here when available.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchMedia,children:\"Get Content\"})]})]})]});};export default CardComponent;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","defaultData","LoadingOverlay","style","position","top","left","width","height","backgroundColor","display","justifyContent","alignItems","zIndex","children","fontSize","color","CardComponent","_ref","maxCards","data","setData","savedData","localStorage","getItem","JSON","parse","isLoading","setIsLoading","displayedComments","setDisplayedComments","rejectedComments","setRejectedComments","savedRejectedComments","Set","repliedComments","setRepliedComments","savedRepliedComments","activeCard","setActiveCard","initializeCountdown","disabledTime","now","Date","getTime","remainingTime","Math","floor","parseInt","isButtonDisabled","setIsButtonDisabled","countdown","setCountdown","setItem","stringify","Array","from","fetchMedia","response","fetch","method","headers","ok","Error","concat","status","jsonData","json","transformedData","map","item","imageUrl","media_url","date","timestamp","id","username","comments","commentsFetched","Promise","all","fetchComments","updatedActiveCardExists","updatedData","newItem","existingItem","find","oldItem","error","console","mediaId","isActiveCard","arguments","length","undefined","body","media_id","newComments","filter","comment","has","prevData","existingCommentIds","c","filteredComments","prevActiveCard","removeComment","commentToRemove","prev","newSet","updatedComments","handleCardButtonClick","card","submitComments","post","closeDetailScreen","updateCommentsWithResponses","responseData","responseEntry","log","commentsWithoutResponse","payload","effectiveData","numCardsToShow","limitedData","slice","DetailScreen","_ref2","selectedComment","setSelectedComment","showFullComment","setShowFullComment","draftReply","setDraftReply","generatedResponse","setGeneratedResponse","isCommentRejected","selectComment","refreshComments","updatedComment","handleShowMore","handleDraftChange","e","target","value","rejectReply","publishReply","currentCommentIndex","findIndex","optimisticUpdatedComments","commentId","reply","nextComment","className","src","alt","onClick","index","userImage","substring","onChange","placeholder","cursor","disabled"],"sources":["C:/Users/riadd/Documents/GitHub/SuperpowerDM/frontend/superpowerdm/src/Components/cards.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst defaultData = [];\r\n\r\n// const defaultData = [\r\n//   {\r\n//     id: '1806821234567854',\r\n//     imageUrl: 'https://picsum.photos/id/237/1080/1080',\r\n//     date: '2023-12-09T21:35:36+0000',\r\n//     username: 'user1',\r\n//     comments: [\r\n//       { username: 'commenter1', comment: 'Great post!' },\r\n//       { username: 'commenter2', comment: 'Love this!' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '179887602982372',\r\n//     imageUrl: 'https://picsum.photos/id/7/1080/1920',\r\n//     date: '2023-12-09T21:32:54+0000',\r\n//     username: 'user2',\r\n//     comments: [\r\n//       { username: 'commenter3', comment: 'Amazing content!' },\r\n//       { username: 'commenter4', comment: 'Really nice picture.' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '17901198953067',\r\n//     imageUrl: 'https://picsum.photos/id/63/1080/1080',\r\n//     date: '2023-11-16T14:51:08+0000',\r\n//     username: 'user3',\r\n//     comments: [\r\n//       { username: 'commenter5', comment: 'This is awesome!' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '17987708884506',\r\n//     imageUrl: 'https://picsum.photos/id/16/1080/1920',\r\n//     date: '2023-11-03T16:16:05+0000',\r\n//     username: 'user4',\r\n//     comments: [\r\n//       { username: 'commenter1', comment: 'I like this post a lot.' },\r\n//       { username: 'commenter7', comment: 'Great job!' },\r\n//       { username: 'commenter8', comment: 'Very cool!' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '1823344558749012',\r\n//     imageUrl: 'https://picsum.photos/id/5/1080/1080',\r\n//     date: '2023-10-25T10:30:21+0000',\r\n//     username: 'user5',\r\n//     comments: [\r\n//       { username: 'commenter9', comment: 'Superb!' },\r\n//       { username: 'commenter10', comment: 'Inspiring work.' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '17651127890987654',\r\n//     imageUrl: 'https://picsum.photos/id/59/1080/1080',\r\n//     date: '2023-10-20T08:15:45+0000',\r\n//     username: 'user6',\r\n//     comments: [\r\n//       { username: 'commenter11', comment: 'Fantastic!' },\r\n//       { username: 'commenter12', comment: 'Wow, this is great!' }\r\n//     ]\r\n//   },\r\n//   {\r\n//     id: '176543677654',\r\n//     imageUrl: 'https://picsum.photos/id/59/1080/1080',\r\n//     date: '2023-10-20T08:15:45+0000',\r\n//     username: 'user6',\r\n//     comments: [\r\n//       { username: 'commenter11', comment: 'Fantastic!' },\r\n//       { username: 'commenter12', comment: 'Wow, this is great!' }\r\n//     ]\r\n//   },\r\n// ];\r\n\r\nconst LoadingOverlay = () => (\r\n  <div style={{\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    zIndex: 1000\r\n  }}>\r\n    <div style={{ fontSize: '2rem', color: 'white' }}>Loading...</div>\r\n  </div>\r\n);\r\n\r\nconst CardComponent = ({maxCards}) => {\r\n  const [data, setData] = useState(() => {\r\n    const savedData = localStorage.getItem('defaultData');\r\n    return savedData ? JSON.parse(savedData) : defaultData;\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [displayedComments, setDisplayedComments] = useState({});\r\n  const [rejectedComments, setRejectedComments] = useState(() => {\r\n    const savedRejectedComments = localStorage.getItem('rejectedComments');\r\n    return savedRejectedComments ? new Set(JSON.parse(savedRejectedComments)) : new Set();\r\n  });\r\n  const [repliedComments, setRepliedComments] = useState(() => {\r\n    const savedRepliedComments = localStorage.getItem('repliedComments');\r\n    return savedRepliedComments ? new Set(JSON.parse(savedRepliedComments)) : new Set();\r\n  });\r\n  const [activeCard, setActiveCard] = useState(null);\r\n\r\n  const initializeCountdown = () => {\r\n    const disabledTime = localStorage.getItem('disabledTime');\r\n    if (disabledTime) {\r\n      const now = new Date().getTime();\r\n      const remainingTime = 300 - Math.floor((now - parseInt(disabledTime)) / 1000);\r\n      return remainingTime > 0 ? remainingTime : 0;\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  const [isButtonDisabled, setIsButtonDisabled] = useState(initializeCountdown() > 0);\r\n  const [countdown, setCountdown] = useState(initializeCountdown());\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('defaultData', JSON.stringify(data));\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('rejectedComments', JSON.stringify(Array.from(rejectedComments)));\r\n  }, [rejectedComments]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('repliedComments', JSON.stringify(Array.from(repliedComments)));\r\n  }, [repliedComments]);\r\n\r\n  const fetchMedia = async () => {\r\n    setIsLoading(true);\r\n    setIsButtonDisabled(true);\r\n  \r\n    try {\r\n      // Existing fetch operation\r\n      const response = await fetch('/fetch_media', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n  \r\n      const jsonData = await response.json();\r\n      setIsButtonDisabled(false);\r\n  \r\n      let transformedData = jsonData.map(item => ({\r\n        imageUrl: item.media_url,\r\n        date: item.timestamp,\r\n        id: item.id,\r\n        username: item.username,\r\n        comments: [],\r\n        commentsFetched: false\r\n      }));\r\n  \r\n      // Fetch comments for each post\r\n      await Promise.all(transformedData.map(async (item) => {\r\n        if (!item.commentsFetched) {\r\n          await fetchComments(item.id, item.username);\r\n          item.commentsFetched = true;\r\n        }\r\n      }));\r\n  \r\n      let updatedActiveCardExists = false;\r\n      const updatedData = transformedData.map(newItem => {\r\n        const existingItem = data.find(oldItem => oldItem.id === newItem.id);\r\n        if (existingItem) {\r\n          if (activeCard && activeCard.id === existingItem.id) {\r\n            updatedActiveCardExists = true;\r\n          }\r\n          return { ...newItem, comments: existingItem.comments, commentsFetched: existingItem.commentsFetched };\r\n        }\r\n        return newItem;\r\n      });\r\n  \r\n      setIsLoading(false);\r\n      setData(updatedData);\r\n      if (!updatedActiveCardExists) {\r\n        setActiveCard(null); // Reset active card\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching media:', error);\r\n    } finally {\r\n      setIsButtonDisabled(false);\r\n    }\r\n  };\r\n  \r\n\r\n  const fetchComments = async (mediaId, username, isActiveCard = false) => {\r\n    try {\r\n      const response = await fetch('/fetch_comments', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ media_id: mediaId, username: username })\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n  \r\n      let newComments = await response.json();\r\n      newComments = newComments.filter(comment => \r\n        !rejectedComments.has(comment.id) && !repliedComments.has(comment.id)\r\n      );\r\n  \r\n      setData(prevData => prevData.map(item => {\r\n        if (item.id === mediaId) {\r\n          const existingCommentIds = new Set(item.comments.map(c => c.id));\r\n          const filteredComments = newComments.filter(comment => !existingCommentIds.has(comment.id));\r\n          return { ...item, comments: [...item.comments, ...filteredComments] };\r\n        }\r\n        return item;\r\n      }));\r\n  \r\n      if (isActiveCard) {\r\n        setActiveCard(prevActiveCard => {\r\n          if (prevActiveCard && prevActiveCard.id === mediaId) {\r\n            return { ...prevActiveCard, comments: newComments };\r\n          }\r\n          return prevActiveCard;\r\n        });\r\n      }\r\n  \r\n    } catch (error) {\r\n      console.error('Error fetching comments:', error);\r\n    }\r\n  };  \r\n  \r\n\r\n  const removeComment = (mediaId, commentToRemove) => {\r\n    setRejectedComments(prev => {\r\n      const newSet = new Set([...prev, commentToRemove.id]);\r\n      localStorage.setItem('rejectedComments', JSON.stringify(Array.from(newSet))); // Save to localStorage\r\n      return newSet;\r\n    });\r\n  \r\n    setData(prevData => prevData.map(item => {\r\n      if (item.id === mediaId) {\r\n        const updatedComments = item.comments.filter(comment => comment.id !== commentToRemove.id);\r\n        return { ...item, comments: updatedComments };\r\n      }\r\n      return item;\r\n    }));\r\n  }; \r\n\r\n  const handleCardButtonClick = async (card) => {\r\n    setIsLoading(true); // Start loading\r\n  \r\n    try {\r\n      if (card.comments && card.comments.length > 0) {\r\n        await submitComments(card.comments);\r\n  \r\n        // After submitComments, find the updated card in your state\r\n        setData(prevData => {\r\n          const updatedData = prevData.map(post => {\r\n            if (post.id === card.id) {\r\n              setActiveCard(post); // Set the updated card as active\r\n              return { ...post };\r\n            }\r\n            return post;\r\n          });\r\n          return updatedData;\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error in handleCardButtonClick:', error);\r\n    } finally {\r\n      setIsLoading(false); // Stop loading\r\n    }\r\n  };\r\n  \r\n    \r\n\r\n  const closeDetailScreen = () => {\r\n    setActiveCard(null);\r\n  };\r\n\r\n  const updateCommentsWithResponses = (responseData) => {\r\n    setData(prevData => {\r\n      const updatedData = prevData.map(post => ({\r\n        ...post,\r\n        comments: post.comments.map(comment => {\r\n          const responseEntry = responseData.find(response => response.id === comment.id);\r\n          return responseEntry \r\n            ? { ...comment, response: responseEntry.response }\r\n            : comment;\r\n        })\r\n      }));\r\n      console.log(\"Updated data with responses:\", updatedData);\r\n      return updatedData;\r\n    });\r\n  };\r\n  \r\n\r\n  const submitComments = async (comments) => {\r\n    try {\r\n      // Filter out comments that already have a response\r\n      const commentsWithoutResponse = comments.filter(comment => !comment.response);\r\n  \r\n      if (commentsWithoutResponse.length === 0) {\r\n        console.log(\"No new comments to process\");\r\n        return;\r\n      }\r\n  \r\n      // Prepare the payload: include both comment text and id\r\n      const payload = commentsWithoutResponse.map(comment => ({\r\n        id: comment.id,\r\n        comment: comment.comment\r\n      }));\r\n  \r\n      const response = await fetch('/submit_comments', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n  \r\n      const responseData = await response.json();\r\n      updateCommentsWithResponses(responseData);\r\n\r\n  \r\n    } catch (error) {\r\n      console.error('Error submitting comments:', error);\r\n    }\r\n  };\r\n  \r\n  \r\n  \r\n  // Check if data is empty, and if so, use defaultData\r\n  const effectiveData = data.length === 0 ? defaultData : data;\r\n  // Determine the number of cards to display\r\n  const numCardsToShow = maxCards || effectiveData.length;\r\n  // Slice the data to limit the number of cards if necessary\r\n  const limitedData = effectiveData.slice(0, numCardsToShow);\r\n\r\n  const DetailScreen = ({ activeCard, closeDetailScreen, fetchComments, removeComment, rejectedComments }) => {\r\n    const [selectedComment, setSelectedComment] = useState(null);\r\n    const [showFullComment, setShowFullComment] = useState(false);\r\n    const [draftReply, setDraftReply] = useState(\"\");\r\n    const [generatedResponse, setGeneratedResponse] = useState(\"\");\r\n    const isCommentRejected = (comment) => rejectedComments.has(comment.id);\r\n\r\n    const selectComment = (comment) => {\r\n      setSelectedComment(comment);\r\n      setShowFullComment(false);\r\n      setDraftReply(comment.response || \"\");\r\n    };\r\n    \r\n    const refreshComments = async () => {\r\n      if (activeCard) {\r\n        await fetchComments(activeCard.id, activeCard.username);\r\n    \r\n        // After fetching new comments, check if the previously selected comment still exists\r\n        if (selectedComment) {\r\n          const updatedComment = activeCard.comments.find(comment => comment.id === selectedComment.id);\r\n          if (updatedComment) {\r\n            setSelectedComment(updatedComment); // Reselect the comment if it exists\r\n          } else {\r\n            setSelectedComment(null); // Deselect if the comment no longer exists\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    const handleShowMore = () => {\r\n      setShowFullComment(true);\r\n    };\r\n  \r\n    const handleDraftChange = (e) => {\r\n      setDraftReply(e.target.value);\r\n    };\r\n  \r\n    const rejectReply = () => {\r\n      if (selectedComment && activeCard) {\r\n        setRejectedComments(prev => new Set([...prev, selectedComment.id]));\r\n        removeComment(activeCard.id, selectedComment);\r\n        setSelectedComment(null); // Reset selected comment\r\n      }\r\n    };    \r\n\r\n    const publishReply = async () => {\r\n      console.log(\"Publishing reply:\", draftReply);\r\n    \r\n      if (!selectedComment) {\r\n        console.error(\"No comment selected\");\r\n        return;\r\n      }\r\n    \r\n      // Get the index of the currently selected comment\r\n      const currentCommentIndex = activeCard.comments.findIndex(comment => comment.id === selectedComment.id);\r\n    \r\n      // UI update before server response (optimistic update)\r\n      let optimisticUpdatedComments = [...activeCard.comments];\r\n      optimisticUpdatedComments = optimisticUpdatedComments.filter(comment => comment.id !== selectedComment.id);\r\n    \r\n      setActiveCard({ ...activeCard, comments: optimisticUpdatedComments });\r\n    \r\n      setData(prevData => prevData.map(item => {\r\n        if (item.id === activeCard.id) {\r\n          return { ...item, comments: optimisticUpdatedComments };\r\n        }\r\n        return item;\r\n      }));\r\n    \r\n      const payload = {\r\n        commentId: selectedComment.id,\r\n        reply: draftReply\r\n      };\r\n    \r\n      try {\r\n        const response = await fetch('/publish_reply', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(payload),\r\n        });\r\n    \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n    \r\n        // Server confirmed, update the replied comments set\r\n        const responseData = await response.json();\r\n        console.log(\"Reply published:\", responseData);\r\n    \r\n        setRepliedComments(prev => {\r\n          const newSet = new Set([...prev, selectedComment.id]);\r\n          localStorage.setItem('repliedComments', JSON.stringify(Array.from(newSet)));\r\n          return newSet;\r\n        });\r\n    \r\n        // Select the next comment if it exists\r\n        const nextComment = optimisticUpdatedComments[currentCommentIndex] || optimisticUpdatedComments[currentCommentIndex - 1] || null;\r\n        setSelectedComment(nextComment);\r\n        setDraftReply(nextComment ? nextComment.response || \"\" : \"\");\r\n    \r\n      } catch (error) {\r\n        console.error('Error publishing reply:', error);\r\n        // Revert UI changes if there was an error\r\n        setActiveCard({ ...activeCard, comments: [...activeCard.comments, selectedComment] });\r\n        setData(prevData => prevData.map(item => {\r\n          if (item.id === activeCard.id) {\r\n            return { ...item, comments: [...item.comments, selectedComment] };\r\n          }\r\n          return item;\r\n        }));\r\n        setSelectedComment(selectedComment); // Re-select the original comment\r\n      }\r\n    };\r\n    \r\n    \r\n  \r\n    return (\r\n      <div className=\"detail-screen\">\r\n        <div className=\"comment-header\">\r\n          <h2>Post from {activeCard.date}</h2>\r\n          <div className=\"post-image-container\">\r\n            <img src={activeCard.imageUrl} alt=\"Post\" className=\"post-image\" />\r\n            <div className=\"post-image-text\">Some text next to the image</div>\r\n          </div>\r\n          <div className=\"comment-info\">\r\n            <div className=\"comment-counter\">{activeCard.comments.filter(comment => !rejectedComments.has(comment.id) && repliedComments.has(comment.id)).length}/{activeCard.comments.filter(comment => !rejectedComments.has(comment.id)).length} comments replied to\r\n             </div>\r\n            <button className=\"circle-button\" onClick={refreshComments}>\r\n              <img src=\"/Assets/reload.png\" className=\"reload\" alt=\"Close\" />\r\n            </button>\r\n          </div>\r\n          <button className=\"circle-button\" onClick={closeDetailScreen}>X</button>\r\n        </div>\r\n        <div className=\"content-body\">\r\n        <div className=\"comments-list\">\r\n          <h3>Comments</h3>\r\n          {activeCard.comments\r\n          .filter(comment => !isCommentRejected(comment))\r\n            .filter(comment => !rejectedComments.has(comment.id)) // potential error line\r\n            .map((comment, index) => {\r\n            return (\r\n              <div key={index} className={`comment-item ${selectedComment === comment ? 'highlighted' : ''}`}\r\n                  onClick={() => selectComment(comment)}>\r\n                <img src={comment.userImage} alt=\"User\" />\r\n                <div className=\"comment-username\">@{comment.username}</div>\r\n                <div className=\"separator\">| </div>\r\n                <div className=\"comment-text\">{comment.comment}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n          <div className=\"comment-detail\">\r\n            {selectedComment ? (\r\n                <>\r\n                <div className=\"comment-detail-header\">\r\n                  <img src={selectedComment.userImage} alt=\"User\" className=\"comment-user-image\" />\r\n                  <span>@{selectedComment.username}</span>\r\n                </div>\r\n                <div className=\"comment-detail-title\">\r\n                  <h2>Commented:</h2>\r\n                </div>\r\n                <p className=\"comment-text\">\r\n                {showFullComment || (selectedComment.comment.length <= 250)\r\n                    ? `\"${selectedComment.comment}\"`\r\n                    : `\"${selectedComment.comment.substring(0, 247)}...\"`\r\n                  }\r\n                  {!showFullComment && selectedComment.comment.length > 250 && (\r\n                    <button onClick={handleShowMore}>Show more</button>\r\n                  )}\r\n                </p>\r\n                <div className=\"draft-reply-container\">\r\n                  <div className=\"draft-reply-header\">\r\n                    {/* <img src=\"/Assets/def_pfp.jpg\" alt=\"Reply Icon\" /> */}\r\n                    <span>Your reply draft:</span>\r\n                  </div>\r\n                  <textarea\r\n                    value={draftReply}\r\n                    onChange={handleDraftChange}\r\n                    placeholder=\"Type your reply...\"\r\n                  />\r\n                  <div className=\"draft-reply-actions\">\r\n                    <button className=\"reject-button\" onClick={rejectReply}>Reject ✖</button>\r\n                    <button className=\"publish-button\" onClick={publishReply}>Publish ✈</button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <p>Select a comment to view details</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {isLoading && <LoadingOverlay />} {/* Loading overlay */}\r\n      {activeCard ? (\r\n        <DetailScreen \r\n          activeCard={activeCard} \r\n          closeDetailScreen={closeDetailScreen} \r\n          fetchComments={fetchComments}\r\n          removeComment={removeComment}\r\n          rejectedComments={rejectedComments}\r\n          />\r\n      ) : (\r\n      <div className=\"card-container\">\r\n      <div className=\"refresh-button\">\r\n      <button \r\n        style={isLoading ? {backgroundColor: 'grey', cursor: 'not-allowed'} : {backgroundColor: 'red', cursor: 'pointer'}} \r\n        disabled={isButtonDisabled}\r\n        onClick={fetchMedia}\r\n      >\r\n          <span> Refresh feed </span>\r\n            <img src=\"/Assets/refresh_red.png\" className=\"reload\" />\r\n          </button>\r\n          <div className=\"tooltip\">\r\n                  <span className=\"tooltip-icon\">?</span>\r\n                  <span className=\"tooltip-text\">A process is a set of structured activities and tasks performed to achieve a specific goal.</span>\r\n          </div>\r\n      </div>\r\n        {limitedData.length > 0 ? limitedData.map((item, index) => (\r\n          <div key={item.id || index} className=\"card\">\r\n            {/* Card Header */}\r\n            <div className=\"card-header\">\r\n            <span className=\"counter-box\">\r\n            {item.comments.filter(comment => !rejectedComments.has(comment.id) && repliedComments.has(comment.id)).length}/\r\n            {item.comments.filter(comment => !rejectedComments.has(comment.id)).length}     \r\n            </span>\r\n              <h2> Comments replied </h2>\r\n              <button className=\"circle-button\" onClick={() => fetchComments(item.id, item.username)}>\r\n                <img src=\"/Assets/reload.png\" className=\"reload\" />\r\n              </button>\r\n            </div>\r\n            {/* Card Content */}\r\n            <div className=\"card-content\">\r\n              {/* Image on the left */}\r\n              <img src={item.imageUrl} alt=\"Post\" className=\"card-image\" />\r\n\r\n              {/* Text and Button on the right */}\r\n              <div className=\"card-text\">\r\n                <div>\r\n                  <h4>Post Date:</h4>\r\n                  <p className=\"card-date\">{item.date}</p>\r\n                </div>\r\n                \r\n                <button className=\"card-button\" onClick={() => handleCardButtonClick(item)}>\r\n                    Review {item.comments.filter(comment => !rejectedComments.has(comment.id)).length} Draft Replies >\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )) : (\r\n          <div className=\"empty-screen\">\r\n            <h1>No content!</h1>\r\n            <p>Your content will appear here when available.</p>\r\n            {/* <img src=\"/Assets/def_pfp.jpg\" alt=\"Descriptive Alt Text\" /> */}\r\n            <button onClick={fetchMedia}>Get Content</button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}